parameters:
  - name: deploymentName
    type: string
    default: example

variables:
  - template: ${{ parameters.deploymentName }}/global.yml
  - name: tfBuildRepoPath
    value: $(Build.SourcesDirectory)/$(Build.Repository.Name)
  - name: tfBuildSubpath
    value: env/$(environment)/${{ parameters.deploymentName }}
  - name: tfConfigRootPath
    value: $(tfBuildRepoPath)/$(tfBuildSubpath)
  - name: tfConfigPath
    value: $(tfConfigRootPath)/main.tf
  - name: azureDeploymentEnvironment
    value: VMInfraDeployment-$(environment)
  - name: artifactUploadPath
    value: "$(Pipeline.Workspace)/$(environment)_tfplan/$(Build.BuildId).tgz"
  - name: artifactExtractPath
    value: "$(Build.SourcesDirectory)"
  - name: tfExtractArtifactRunPath
    value: $(artifactExtractPath)/$(tfBuildSubpath)
